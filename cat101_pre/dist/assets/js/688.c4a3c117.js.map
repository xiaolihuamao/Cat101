{"version":3,"file":"assets/js/688.c4a3c117.js","mappings":"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","sources":["webpack://cat101_pre/./src/views/self.vue","webpack://cat101_pre/src/views/self.vue","webpack://cat101_pre/./src/views/self.vue?b566","webpack://cat101_pre/./src/views/self.vue?bac6"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"register\"},[_c('div',{staticClass:\"inset\"},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"status-icon\":\"\",\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"账号\",\"prop\":\"uname\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"required\":\"true\",\"disabled\":\"\"},model:{value:(_vm.ruleForm.uname),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"uname\", $$v)},expression:\"ruleForm.uname\"}})],1),_c('button',{staticStyle:{\"margin-left\":\"330px\"},on:{\"click\":function($event){_vm.uxnameIsDisabled=false}}},[_vm._v(\"修改昵称\")]),_c('el-form-item',{attrs:{\"label\":\"昵称\",\"prop\":\"uxname\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\",\"disabled\":_vm.uxnameIsDisabled},model:{value:(_vm.ruleForm.uxname),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"uxname\", $$v)},expression:\"ruleForm.uxname\"}})],1),_c('button',{staticStyle:{\"margin-left\":\"330px\"},on:{\"click\":function($event){_vm.telIsDisabled=false}}},[_vm._v(\"修改电话\")]),_c('el-form-item',{attrs:{\"label\":\"电话号码\",\"prop\":\"utel\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"onkeyup\":\"value=value.replace(/[^\\\\d]/g,'')\",\"autocomplete\":\"off\",\"disabled\":_vm.telIsDisabled},model:{value:(_vm.ruleForm.utel),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"utel\", $$v)},expression:\"ruleForm.utel\"}})],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"margin\":\"auto\",\"background-color\":\"#d7cd94\",\"border-color\":\"#c2b79a\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"修改 \")]),_c('el-button',{staticStyle:{\"background-color\":\"#d7cd94\",\"border-color\":\"#c2b79a\"},on:{\"click\":function($event){return _vm.resetForm('ruleForm')}}},[_vm._v(\"重置 \")])],1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"register\">\r\n    <div class=\"inset\">\r\n\r\n      <!-- <el-button type=\"warning\" plain @click=\"$router.push('/layout/login')\">已注册，去登录</el-button> -->\r\n      <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n        <!-- 账号 -->\r\n        <el-form-item label=\"账号\" prop=\"uname\">\r\n          <el-input v-model=\"ruleForm.uname\" autocomplete=\"off\" required=\"true\" disabled></el-input>\r\n        </el-form-item>\r\n        <!-- 昵称 -->\r\n        <button @click=\"uxnameIsDisabled=false\" style=\"margin-left: 330px;\">修改昵称</button>\r\n        <el-form-item label=\"昵称\" prop=\"uxname\">\r\n          <el-input type=\"text\" v-model=\"ruleForm.uxname\" autocomplete=\"off\"\r\n                    :disabled=\"uxnameIsDisabled\"></el-input>\r\n        </el-form-item>\r\n        <!--电话号码-->\r\n        <button @click=\"telIsDisabled=false\" style=\"margin-left: 330px;\">修改电话</button>\r\n        <el-form-item label=\"电话号码\" prop=\"utel\">\r\n          <el-input type=\"text\" onkeyup=\"value=value.replace(/[^\\d]/g,'')\" v-model=\"ruleForm.utel\" autocomplete=\"off\"\r\n                    :disabled=\"telIsDisabled\"></el-input>\r\n        </el-form-item>\r\n        <!-- 下面是提交和重置按钮，我改变了按钮的样式 -->\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\" style=\"margin: auto;background-color: #d7cd94;\r\n          border-color: #c2b79a;\">修改\r\n          </el-button>\r\n          <!-- 重置 -->\r\n          <el-button @click=\"resetForm('ruleForm')\" style=\"background-color: #d7cd94;border-color: #c2b79a;\">重置\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport {registerAPI, searchUserAPI, updateSelfAPI} from \"@/api\";\r\n\r\nexport default {\r\n  name: \"myRegister\",\r\n  inject: [\"reload\"],\r\n// 数据\r\n  data() {\r\n    var checkUname = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error(\"账号不能为空\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    var checkUxname = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error(\"昵称不能为空\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    var checkUtel = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error(\"电话号码不能为空\"));\r\n      } else if (value.length != 11) {\r\n        callback(\"请输入正确的电话号码\");\r\n      } else {\r\n        callback();\r\n      }\r\n    }\r\n    return {\r\n      user: JSON.parse(localStorage.getItem('user')),\r\n      ruleForm: {\r\n        uid:\"\",\r\n        uname: \"\",\r\n        uxname:\"\",\r\n        utel: \"\",\r\n      },\r\n      rules: {\r\n        uname: [{validator: checkUname, trigger: \"blur\"}],\r\n        uxname: [{validator: checkUxname, trigger: \"blur\"}],\r\n        utel: [{validator: checkUtel, trigger: \"blur\"}],\r\n      },\r\n      isShow: false,\r\n      uxnameIsDisabled: true,\r\n      telIsDisabled: true,\r\n    };\r\n  },\r\n  created() {\r\n    this.indexs();\r\n  },\r\n  // 方法\r\n  methods: {\r\n    indexs() {\r\n      if(JSON.parse(localStorage.getItem('user'))==null){\r\n        this.$message.error(\"无token，请登录！\") //后端返回失败结果，提示后端返回的错误message或者也可以自己设置提示\r\n        return;\r\n      }\r\n      this.ruleForm.uname = this.user.uname;\r\n      this.ruleForm.uxname = this.user.uxname;\r\n      this.ruleForm.utel = this.user.utel;\r\n      this.ruleForm.uid=this.user.uid;\r\n    },\r\n//点击提交表单触发    校验和提交信息到后端接口\r\n    async submitForm(formName) {\r\n      const json = JSON.stringify(this.ruleForm);\r\n      const {data :res} = await updateSelfAPI(json);    //提交表单后获取到表单数据对象ruleForm然后使用axios传递给接口函数，得到一个返回值，是promise对象       //打印后端返回结果,用于验证编写是否成功，后续可删除这段！！！！！！！\r\n      if(res.code === '200') {\r\n        this.$message.success(\"修改成功！！\")                            ////后端返回成功结果，提示后端返回的错误message或者也可以自己设置提示\r\n        const {data :res}=await searchUserAPI(this.user.uid);\r\n        const token=this.user.token;//取出token\r\n        this.user=res.data;\r\n        this.user.token=token;//添加token\r\n        localStorage.setItem('user',JSON.stringify(this.user));\r\n\r\n        this.$store.commit('cUser')  //修改昵称后 重新get user\r\n          console.log(this.$store.state.user);\r\n\r\n        this.reload();\r\n      }else{\r\n        this.$message.error(res.msg) ////后端返回失败结果，提示后端返回的错误message或者也可以自己设置提示\r\n      }\r\n\r\n\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    },\r\n  },\r\n  activated() {\r\n    this.getCat();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.inset {\r\n  width: 400px;\r\n  height: 235px;\r\n  background-color: #dfd6b9;\r\n  position: absolute;\r\n  top: 150px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  padding: 80px;\r\n  padding-top: 40px;\r\n  padding-left: 30px;\r\n  border-radius: 30px;\r\n}\r\n\r\n.register {\r\n  /*width: 1672px;*/\r\n  width: 100%;\r\n  height: 600px;\r\n  margin: 0px auto;\r\n  /*padding-top: 140px;*/\r\n  position: relative;\r\n}\r\n\r\n.el-link {\r\n  float: right;\r\n  color: black;\r\n}\r\n\r\n/* 改变重置按钮鼠标经过时的样式 */\r\n.el-button--default:hover {\r\n  border-color: #dbd783;\r\n  color: #FFF;\r\n}\r\n\r\n.el-button--primary:hover {\r\n  color: rgb(32, 30, 27);\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./self.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./self.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./self.vue?vue&type=template&id=cebe236e&scoped=true&\"\nimport script from \"./self.vue?vue&type=script&lang=js&\"\nexport * from \"./self.vue?vue&type=script&lang=js&\"\nimport style0 from \"./self.vue?vue&type=style&index=0&id=cebe236e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cebe236e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","ref","attrs","ruleForm","rules","model","value","uname","callback","$$v","$set","expression","staticStyle","on","$event","uxnameIsDisabled","_v","uxname","telIsDisabled","utel","submitForm","resetForm","staticRenderFns","name","inject","data","user","uid","validator","trigger","isShow","created","methods","indexs","localStorage","console","activated","component"],"sourceRoot":""}
"use strict";(self["webpackChunkcat101_pre"]=self["webpackChunkcat101_pre"]||[]).push([[688],{2688:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"register"},[t("div",{staticClass:"inset"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"账号",prop:"uname"}},[t("el-input",{attrs:{autocomplete:"off",required:"true",disabled:""},model:{value:e.ruleForm.uname,callback:function(t){e.$set(e.ruleForm,"uname",t)},expression:"ruleForm.uname"}})],1),t("button",{staticStyle:{"margin-left":"330px"},on:{click:function(t){e.uxnameIsDisabled=!1}}},[e._v("修改昵称")]),t("el-form-item",{attrs:{label:"昵称",prop:"uxname"}},[t("el-input",{attrs:{type:"text",autocomplete:"off",disabled:e.uxnameIsDisabled},model:{value:e.ruleForm.uxname,callback:function(t){e.$set(e.ruleForm,"uxname",t)},expression:"ruleForm.uxname"}})],1),t("button",{staticStyle:{"margin-left":"330px"},on:{click:function(t){e.telIsDisabled=!1}}},[e._v("修改电话")]),t("el-form-item",{attrs:{label:"电话号码",prop:"utel"}},[t("el-input",{attrs:{type:"text",onkeyup:"value=value.replace(/[^\\d]/g,'')",autocomplete:"off",disabled:e.telIsDisabled},model:{value:e.ruleForm.utel,callback:function(t){e.$set(e.ruleForm,"utel",t)},expression:"ruleForm.utel"}})],1),t("el-form-item",[t("el-button",{staticStyle:{margin:"auto","background-color":"#d7cd94","border-color":"#c2b79a"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("修改 ")]),t("el-button",{staticStyle:{"background-color":"#d7cd94","border-color":"#c2b79a"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置 ")])],1)],1)],1)])},l=[],u=(r(1703),r(586)),a={name:"myRegister",inject:["reload"],data(){var e=(e,t,r)=>{if(!t)return r(new Error("账号不能为空"));r()},t=(e,t,r)=>{if(!t)return r(new Error("昵称不能为空"));r()},r=(e,t,r)=>{if(!t)return r(new Error("电话号码不能为空"));11!=t.length?r("请输入正确的电话号码"):r()};return{user:JSON.parse(localStorage.getItem("user")),ruleForm:{uid:"",uname:"",uxname:"",utel:""},rules:{uname:[{validator:e,trigger:"blur"}],uxname:[{validator:t,trigger:"blur"}],utel:[{validator:r,trigger:"blur"}]},isShow:!1,uxnameIsDisabled:!0,telIsDisabled:!0}},created(){this.indexs()},methods:{indexs(){null!=JSON.parse(localStorage.getItem("user"))?(this.ruleForm.uname=this.user.uname,this.ruleForm.uxname=this.user.uxname,this.ruleForm.utel=this.user.utel,this.ruleForm.uid=this.user.uid):this.$message.error("无token，请登录！")},async submitForm(e){const t=JSON.stringify(this.ruleForm),{data:r}=await(0,u.Bc)(t);if("200"===r.code){this.$message.success("修改成功！！");const{data:e}=await(0,u.K6)(this.user.uid),t=this.user.token;this.user=e.data,this.user.token=t,localStorage.setItem("user",JSON.stringify(this.user)),this.$store.commit("cUser"),console.log(this.$store.state.user),this.reload()}else this.$message.error(r.msg)},resetForm(e){this.$refs[e].resetFields()}},activated(){this.getCat()}},o=a,i=r(1001),n=(0,i.Z)(o,s,l,!1,null,"cebe236e",null),m=n.exports}}]);
//# sourceMappingURL=688.c4a3c117.js.map